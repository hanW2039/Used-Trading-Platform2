<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <title>乐淘淘-购物车</title>
<!--    <link rel="stylesheet" th:href="@{/css/home_page/header_and_nav.css}"/>-->
    <link rel="stylesheet" th:href="@{/css/shopping_cart/shopping_cart.css}"/>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script th:src="@{/js/jquery-1.3.2.min.js}"></script>
    <script th:src="@{/js/home/header_model_js.js}"></script>
    <script th:src="@{/js/shopping_cart/shopping_cart.js}"></script>
    <link rel="stylesheet" th:href="@{/css/reset.css}">
    <link rel="stylesheet" th:href="@{/css/upload.css}">
</head>
<body>
<!-- 导航条 -->
<nav class="navbar">
    <div class="nav-menu">
        <ul class="menu">
            <li><a th:href="@{/index}">首页</a></li>
            <li><a th:href="@{/store}">良品区</a></li>
            <li><a th:href="@{/askBook}">求购区</a></li>
        </ul>
    </div><!-- nav-menu -->

    <form class="nav-search">
        <input type="search" class="searchIn" placeholder="搜商品...">
        <button class="search-logo"><img th:src="@{/img/search2.png}"></button>
    </form>

    <div class="nav-info">
        <a th:href="@{/myBookSelf}" class="username" th:if="${loginUser!=null}" th:text="${loginUser.phone}">你的名字</a>
        <a th:href="@{/login}" class="username" th:if="${loginUser==null}">登录</a>
        <!--			<a th:href="@{/myBookSelf}" class="bookshelf" th:if="${loginUser!=null}">||&nbsp;&nbsp;&nbsp;我的小摊</a>-->
        <a th:href="@{/register}" class="bookshelf" th:if="${loginUser==null}">||&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;注册</a>
        <a th:href="@{/shopping_cart}" class="bookshelf" th:if="${loginUser!=null}">||&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;购物车</a>
        <a th:href="@{/logout}" class="logout" th:if="${loginUser!=null}">[ 退 出 ]</a>
    </div> <!-- nav-info-end -->
</nav>
<div class="top_content">
<!--    <div class="publish_product_div">-->
<!--        <div class="shipping_address" id="10001">-->
<!--            <span class="name_info">谢衣服</span><img th:src="@{/img/pencil.jpg}" class="pencil_icon"/><br/>-->
<!--            <span class="address_info"> </span><br/><br/>-->
<!--            <span class="phone_info">188****1111</span><br/>-->
<!--            <span class="is_default">默认地址</span><img th:src="@{/img/delete_icon.jpg}" class="delete_icon"/>-->
<!--        </div>-->
<!--        <div class="shipping_address" id="10002">-->
<!--            <span class="name_info">wsk</span><img src="/img/pencil.jpg" class="pencil_icon"/><br/>-->
<!--            <span class="address_info"> </span><br/><br/>-->
<!--            <span class="phone_info">188****1111</span><br/>-->
<!--            <span class="is_default">默认地址</span><img src="/img/delete_icon.jpg" class="delete_icon"/>-->
<!--        </div>-->
<!--    </div>-->
    <div class="cart_content">
        <table>
            <tr class="table_head">
                <th colspan="4">商品信息</th>
                <th>商品金额</th>
                <th>商品数量</th>
                <th>总金额</th>
                <th>编辑</th>
            </tr>
            <tr class="table_content" th:each="o:${list}">
                <td class="input_checkbox">
                    <input id="1" type="checkbox" checked="checked" name="checkbox" th:value="${o.sid}"/></td>
                <td class="show_img">
                    <img src="/img/home/feature_prodects/cont1.jpg" th:src="${o.image}" th:value="${o.sid}"
                         th:title="${o.name}"/></td>
                <td class="title" colspan="2"><span th:text="${o.name}">这是一个商品</span></td>
                <td class="cost">￥<span th:text="${o.price}">20.00</span>元</td>
                <td class="count"><span class="minus">-</span><span class="number" th:text="${o.quantity}">2</span><span class="add">+</span>
                </td>
                <td class="per_sum">￥<span th:with="sum=${o.price}*${o.quantity}" th:text="${sum}">40.00</span>元</td>
                <td class="delete_img"><a th:href="@{/deleteCar/(id=${o.id},sid=${o.sid})}"><img th:src="@{/img/delete_icon.jpg}" th:value="${o.id}" class="deleteShopCar"/></a></td>
            </tr>

            <tr class="end_pay">
                <td class="is_all"><input id="all" type="checkbox" checked="checked"/>全选</td>
                <td class="space" colspan="3"></td>
                <td colspan="2" class="all_sum">总价：￥<span>500.00</span>元</td>
                <td colspan="3" class="pay_button_div">
                    <button class="pay_button" onclick="buy()">结算</button>
                </td>
            </tr>
        </table>
    </div>
    <script>
        function buy() {
          var selectedItems = [];

          // 获取选中的复选框
          $("input[name='checkbox']:checked").each(function() {
            selectedItems.push(parseInt($(this).val()));
          });

          // 确保至少选择了一个项目
          if (selectedItems.length === 0) {
            alert("Please select at least one item.");
            return;
          }
          var ids = selectedItems.join(",");
          var nextPageUrl = "buy?ids=" + ids;
          window.location.href = nextPageUrl;
        }
  </script>
    <footer>
<!--        <a href="#">意见反馈&nbsp;&nbsp;&nbsp;联系我们&nbsp;&nbsp;&nbsp;隐私权声明&nbsp;&nbsp;&nbsp;使用条款</a>-->
    </footer>
</div>
</body>
</html>